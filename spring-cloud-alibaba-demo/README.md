# 分库分表
## 垂直分片与水平分片
* 垂直数据库io压力
* 水平分片解决是数据量的问题
## 分片策略
* 取模分片
   * 优点：数据存放均匀
   * 缺点：扩容需要大量数据迁移
* 按照范围分片
   * 优点：扩容不需要迁移数据
   * 缺点：数据不均匀，容易产生数据倾斜

## 如何设计零迁移数据扩容
* 按照范围分片不需要数据迁移
* 分片节点在取模分组

## 分库分表解决要解决问题
* 主键唯一性
* 分布式事务
* sql路由
  * 分片的合理选择
  * id 的分发
* 结果归并
  * eg:order by [col] desc limit 10
  * eg:avg
## 高内聚低耦合 能不分就不分，要分就要彻底
* 预估三年内单表数据量大于500w
* 或者单个文件大于2G
* 读多写少

## shardingSphere 分库分表
* jdbc
* proxy
* 虚拟表 分片键 分片算法
## 分片策略
* inline
  * 根据单一分片键进行精确分片
* 
